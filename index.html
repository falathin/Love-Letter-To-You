<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Perasaan Tersembunyi 🎀</title>
    <link rel="icon" href="favicon.png" type="image/png" />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&family=Dancing+Script&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
  </head>

  <body style="font-family: 'Dancing Script', cursive">
    <!-- Container untuk animasi hujan -->
    <div id="rain-container"></div>

    <div id="popup" class="popup" onclick="closePopup()">
      <div class="popup-content" style="font-family: 'Dancing Script', cursive">
        <h2 id="popup-text"></h2>
        <button onclick="closePopup()">Tutup</button>
      </div>
    </div>

    <div id="scene" style="font-family: 'Dancing Script', cursive"></div>
    <div class="button-group" style="font-family: 'Dancing Script', cursive">
      <button id="nextBtn" onclick="nextScene()">➜ &nbsp; Lanjut</button>
      <button onclick="toggleDarkMode()">🌗 &nbsp; Mode</button>
    </div>

    <audio id="bgm" loop>
      <source
        src="Voice of Wind (Movie Edit) - RADWIMPS.mp3"
        type="audio/mpeg"
      />
      Browsermu tidak mendukung elemen audio.
    </audio>

    <script>
      function preloadAssets() {
        const assets = [
          // Daftar gambar atau audio tambahan jika diperlukan
        ]
        assets.forEach(src => {
          if (src.endsWith('.mp3')) {
            const audio = new Audio()
            audio.src = src
          } else {
            const img = new Image()
            img.src = src
          }
        })
      }

      // Membuat butiran hujan secara dinamis
      function createRain() {
        const rainContainer = document.getElementById('rain-container')
        const COUNT = 100 // jumlah butir hujan

        for (let i = 0; i < COUNT; i++) {
          const drop = document.createElement('div')
          drop.className = 'rain-drop'
          const xPercent = Math.random() * 100
          drop.style.setProperty('--x-percent', xPercent)
          drop.style.animationDelay = Math.random() * 2 + 's'
          drop.style.animationDuration = Math.random() * 1 + 1.5 + 's'
          rainContainer.appendChild(drop)
        }
      }

      let currentScene = 0
      const sceneEl = document.getElementById('scene')
      const nextBtn = document.getElementById('nextBtn')

      const scenes = [
        // Scene 0: Pembuka dengan nuansa hujan
        `
      <div class="bg-rainy"></div>
      <p>Di bawah rintik hujan yang menenangkan, aku mengetik kata-kata ini untukmu...</p>
      <p>こんにちは、そよ風のように君を想う</p>
      `,
        // Scene 1: Bisikan Hati
        `
      <h1>ねえ…聞いてほしい</h1>
      <p>Aku takut untuk bilang langsung, tapi hati ini terlanjur rindu:</p>
      <p>「君のことが好きです」– Aku mencintaimu.</p>
      `,
        // Scene 2: Getar di Dadaku
        `
      <div class="love-message">
        <h1>Pengakuan-Ku</h1>
        <p>Setiap kali aku menatapmu, hatiku berdebar seperti tetesan hujan di dedaunan. 胸がドキドキする。</p>
        <p>Aku menyembunyikan rasa ini dalam diam, seperti awan menahan tangis hujan。</p>
        <p>Saya menyadari belakangan kamu tidak mau berbicara dengan ku, entah aku merasa gelisah ketika kamu mulai menjauh、私はさみしい。</p>
        <p>Sekarang, melalui web ini, aku berani menumpahkan everything。</p>
      </div>
      `,
        // Scene 3: Pesanku untukmu
        `
      <div class="pesan-kusa">
        <h1>Pesan Terakhirku</h1>
        <p>Beri tahu aku, aku tidak peduli setelah ku kirimkan pesan surat ini kepadamu。</p>
        <p>Apapun dampak sosial kita, aku terima negatif dan positifnya。</p>
        <p>Setidaknya sekarang kamu tahu, aku suka kamu。私はあなたを好き。</p>
        <p>Aku merasa akhir-akhir ini kamu menjauh dariku。最近、君は遠ざかっている。</p>
      </div>
      `,
        // Scene 4: Pelangi Harapan
        `
      <h1>🌈 Harapanku</h1>
      <p>Aku sering mundur karena takut. Rasa ini terpendam seperti pelangi yang menunggu bersinar setelah hujan。希望はいつもここに。</p>
      <p>Melihatmu dari jauh, berharap suatu hari kau melihat hatiku yang jujur。</p>
      <p>Saatnya aku berani berkata: 「ずっと一緒にいたい」– Aku ingin selalu bersamamu。</p>

      <h1 style="margin-top:1em">⚠️ Kenyataan</h1>
      <p>Ketika kudengar kau bersamanya, hatiku seakan terbakar dingin。心が凍りつく。しかし、aku memilih merelakan langkahku perlahan。</p>
      `,
        // Scene 5: Penutup Penuh Cinta
        `
      <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">

      <h1>Terima Kasih Telah Mendengarkan – ありがとう</h1>
      <br>
      <div class="box-button" onclick="openPopup('💌 Sepotong Hatiku di Bawah Hujan', \`Hai Yan,<br><br>
      Hujan di luar mengingatkanku pada saat-saat kita berbagi tawa di bawah payung。傘の下で笑った日を思い出す。 Aku sudah suka kamu sejak lama, tapi selalu ragu mengungkapnya。ずっと言いたかったのに、言えなかった。 Hari ini, di bawah rintik hujan, aku berani menulis ini。今日はこの雨の下で書いている。<br><br>
      Jika kau punya waktu dan rasa, WA saja ke:
      <a href=&quot;https://wa.me/6285781457014?text=Hai%20Ibra%2C%20aku%20sudah%20baca%20pesan%20kamu%20di%20bawah%20hujan.&quot; target=&quot;_blank&quot; style=&quot;color:#25D366; text-decoration:none;&quot; onmouseover=&quot;this.style.textDecoration='underline'&quot; onmouseout=&quot;this.style.textDecoration='none'&quot;>
      <br><br><i class='bi bi-whatsapp'></i> 0857-8145-7014</a>.<br><br>
      – Ibrahim Ahmad Falathin\`)">
        <br>
        <div class="button" style="font-family: 'Dancing Script', cursive;"><span class="teks-hadiah">Tekan Untuk Lihat Pesanku 💖</span></div>
        <br><br>
      </div>

      <br><br>
      <p>Hujan boleh reda, tapi kata-kataku akan tetap tertulis untukmu。雨が止んでも、言葉は消えない。 Jika tak berbalas, aku akan tetap mengenang senyum yang kau beri di hari hujan ini。君の笑顔を忘れない。</p>
      <button onclick="restart()">🔁 Baca Ulang</button>
      `
      ]

      let isMusicPlaying = false

      function nextScene() {
        if (!isMusicPlaying) {
          const bgm = document.getElementById('bgm')
          bgm.play().catch(() => {})
          isMusicPlaying = true
        }

        sceneEl.classList.remove('fade-in')
        sceneEl.classList.add('fade-out')

        setTimeout(() => {
          currentScene++
          if (currentScene < scenes.length) {
            sceneEl.innerHTML = scenes[currentScene]
            if (currentScene === scenes.length - 1) {
              nextBtn.style.display = 'none'
            }
            if (currentScene > 0) showConfetti()
          }

          sceneEl.classList.remove('fade-out')
          sceneEl.classList.add('fade-in')
        }, 500)
      }

      function restart() {
        currentScene = 1
        sceneEl.innerHTML = scenes[1]
        nextBtn.style.display = 'inline-block'
        sceneEl.classList.add('fade-in')
      }

      function toggleDarkMode() {
        document.body.classList.toggle('dark')
      }

      function openPopup(title, description) {
        document.getElementById('popup-text').innerHTML = `
        <h2>${title}</h2>
        <p>${description}</p>
      `
        document.getElementById('popup').classList.add('show')
      }

      function closePopup() {
        document.getElementById('popup').classList.remove('show')
      }

      function showConfetti() {
        for (let i = 0; i < 15; i++) {
          const confetti = document.createElement('div')
          confetti.className = 'confetti'
          confetti.style.left = Math.random() * 100 + 'vw'
          confetti.style.animationDelay = Math.random() * 5 + 's'

          // Variasi warna biru
          confetti.style.backgroundColor = [
            'rgba(0, 150, 199, 0.7)', // Biru
            'rgba(3, 169, 244, 0.7)', // Biru terang
            'rgba(33, 150, 243, 0.7)', // Biru langit
            'rgba(0, 188, 212, 0.7)', // Biru aqua
            'rgba(79, 195, 247, 0.7)', // Biru muda
            'rgba(25, 118, 210, 0.7)', // Biru gelap
            'rgba(0, 81, 145, 0.7)', // Biru navy
            'rgba(0, 137, 123, 0.7)', // Biru teal
            'rgba(0, 176, 255, 0.7)', // Biru cerah
            'rgba(0, 102, 204, 0.7)' // Biru royal
          ][Math.floor(Math.random() * 10)]

          document.body.appendChild(confetti)
        }
      }

      document.addEventListener('DOMContentContentLoaded', function (e) {
        if (e.target.closest('.box-button')) {
          showCatConfetti()
        }
      })

      function showCatConfetti() {
        const catSounds = ['cat-1.mp3', 'cat-2.mp3', 'cat-3.mp3']
        const randomCatSound =
          catSounds[Math.floor(Math.random() * catSounds.length)]
        const audio = new Audio(randomCatSound)
        audio.play()

        const img = document.createElement('img')
        img.src = 'lucky_cat.svg'
        img.alt = 'Confetti Kucing'
        img.style.position = 'fixed'
        img.style.width = '80px'
        img.style.left = Math.random() * 90 + 'vw'
        img.style.top = '-100px'
        img.style.zIndex = 10
        img.style.animation = 'dropCat 3s ease-in-out forwards'

        document.body.appendChild(img)
        setTimeout(() => img.remove(), 3000)
      }

      const styleTag = document.createElement('style')
      styleTag.textContent = `
      @keyframes dropCat {
        0% { transform: translateY(0); opacity: 0.9; }
        100% { transform: translateY(100vh); opacity: 0; }
      }
    `
      document.head.appendChild(styleTag)

      window.addEventListener('DOMContentLoaded', () => {
        preloadAssets()
        createRain()
        sceneEl.innerHTML = scenes[0]
        sceneEl.classList.add('fade-in')
      })
    </script>
  </body>
</html>
