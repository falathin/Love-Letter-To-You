<!DOCTYPE html>
<html lang="id">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Perasaan Tersembunyi 🎀</title>
  <link rel="icon" href="favicon.png" type="image/png" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css">
</head>


<body>
  <div id="popup" class="popup" onclick="closePopup()">
    <div class="popup-content">
      <h2 id="popup-text"></h2>
      <button onclick="closePopup()">Tutup</button>
    </div>
  </div>

  <div id="scene"></div>
  <div class="button-group">
    <button id="nextBtn" onclick="nextScene()">➜ &nbsp; Lanjut</button>
    <button onclick="toggleDarkMode()">🌗 &nbsp; Mode</button>
  </div>

  <audio id="bgm" loop>
    <source src="Siapkah Kau 'Tuk Jatuh Cinta Lagi.mp3" type="audio/mpeg">
    Browsermu tidak mendukung elemen audio.
  </audio>

  <script>
    function preloadAssets() {
      const assets = [
        // di load dulu semua source nya
      ];
      assets.forEach(src => {
        if (src.endsWith(".mp3")) {
          const audio = new Audio();
          audio.src = src;
        } else {
          const img = new Image();
          img.src = src;
        }
      });
    }

    let currentScene = 0;
    const sceneEl = document.getElementById("scene");
    const nextBtn = document.getElementById("nextBtn");

    const scenes = [
      // Scene 0: Pembuka
      `
      <div class="bg-birthday"></div>
      <p>Di bawah sinar rembulan, aku menulis kata-kata ini untukmu...</p>
      `,
      // Scene 1: Bisikan Hati
      `
      <h1>ねえ…聞いてほしい</h1>
      <p>Aku takut untuk buat bilang langsung, tapi gw harus jujur:</p>
      <p>「君のことが好きです」– Aku mencintaimu.</p>
      `,
      // Scene 2: Getar di Dadaku
      `
      <div class="love-message">
        <h1>Pengakuan-Ku</h1>
        <p>Setiap kali aku melihat kamu, hatiku merasa senang.</p>
        <p>Aku selalu menahan perasaan ini, tapi bibirku masih terdiam memendam rasa.</p>
        <p>Padahal kita sekelas dan sering ketemu, tapi aku belum berani bilang apa-apa.</p>
        <p class="confession">
          Akhirnya, di sini aku bisa bilang sesuatu melalui web ini<br>
          yang kubuat selama 2 hari.
        </p>
      </div>
      `,
      // Scene 3: Pelangi Harapan
      `
      <h1>🌈 Jujur Saja</h1>
      <p>Aku sering mundur karena takut. Rasa ini kusimpan diam-diam.</p>
      <p>Lihat kamu dari jauh, dan tahu banyak yang suka kamu.</p>
      <p>Sementara aku? Cuma cowok biasa, gak punya kelebihan apa-apa.</p>
      <p>その時、勇気を出して「ずっと一緒にいたい」と言いたい。</p>

      <h1 style="margin-top:1em">⚠️ Kenyataan</h1>
      <p>Pas denger kamu sama Fell... jujur kaget. Tapi yaudah, aku milih mundur pelan-pelan.</p>
            `,
            // Scene 4: Penutup Penuh Cinta
            `
      <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">

      <h1>Makasih Udah Baca Ini</h1>

      <br>
      <div class="box-button" onclick="openPopup('💌 Sedikit dari Hatiku', \`Hai Yan,<br><br>
      Aku udah suka kamu dari kelas 10, tapi gengsi jujur ngaku. Sampai sekarang pun hati aku masih di kamu. Aku cuma pengen tahu, masih ada peluang nggak? Begitu aku mikir-nya, Maaf kalau pernah bikin kamu ilfeel. Nggak maksain kok, cuma mau jujur aja. Kalau mau jawab, WA aja ke:
      <a href=&quot;https://wa.me/6285781457014?text=Hai%20Ibra%2C%20aku%20udah%20baca%20pesan%20kamu.%20&quot; target=&quot;_blank&quot; style=&quot;color:#25D366; text-decoration:none;&quot; onmouseover=&quot;this.style.textDecoration='underline'&quot; onmouseout=&quot;this.style.textDecoration='none'&quot;>
      <br><br><i class='bi bi-whatsapp'></i> 0857-8145-7014</a>.<br><br>
      – Ibrahim Ahmad Falathin\`)">
        <br>
        <div class="button"><span class="teks-hadiah">Tekan Untuk Lihat Pesanku 💖</span></div>
        <br><br>
      </div>


      <br><br>
      <p>Gw tau kita cuma temenan, dan mungkin emang cuma sampai situ. Tapi hari ini gw berani jujur. Maaf ya kalo pernah jadi aneh atau bikin ilfeel apapun itu kesalahan-ku. Gw gak maksa kok. Makasih udah baca... itu aja udah bikin gw senyum sendiri. Semoga kamu bahagia, selalu.</p>
        <button onclick="restart()">🔁 Baca Ulang</button>
      `

    ];

    let isMusicPlaying = false;

    function nextScene() {
      if (!isMusicPlaying) {
        const bgm = document.getElementById('bgm');
        bgm.play().catch(() => { });
        isMusicPlaying = true;
      }

      sceneEl.classList.remove("fade-in");
      sceneEl.classList.add("fade-out");

      setTimeout(() => {
        currentScene++;
        if (currentScene < scenes.length) {
          sceneEl.innerHTML = scenes[currentScene];
          if (currentScene === scenes.length - 1) {
            nextBtn.style.display = "none";
          }
          if (currentScene > 0) showConfetti();
        }

        sceneEl.classList.remove("fade-out");
        sceneEl.classList.add("fade-in");
      }, 500);
    }

    function restart() {
      currentScene = 1;
      sceneEl.innerHTML = scenes[1];
      nextBtn.style.display = "inline-block";
      sceneEl.classList.add("fade-in");
    }

    function toggleDarkMode() {
      document.body.classList.toggle('dark');
    }

    function openPopup(title, description) {
      document.getElementById("popup-text").innerHTML = `
        <h2>${title}</h2>
        <p>${description}</p>
      `;
      document.getElementById("popup").classList.add("show");
    }

    function closePopup() {
      document.getElementById("popup").classList.remove("show");
    }

    function showConfetti() {
      for (let i = 0; i < 20; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        confetti.style.left = Math.random() * 100 + 'vw';
        confetti.style.animationDelay = Math.random() * 5 + 's';
        confetti.style.backgroundColor = ['#e91e63', '#ff9800', '#ffc107', '#8bc34a', '#00bcd4'][Math.floor(Math.random() * 5)];
        document.body.appendChild(confetti);
      }
    }

    // Init
    sceneEl.innerHTML = scenes[0];
    sceneEl.classList.add("fade-in");

    document.addEventListener("click", function (e) {
      if (e.target.closest(".box-button")) {
        showCatConfetti();
      }
    });

    function showCatConfetti() {
      const catSounds = [
        "cat-1.mp3",
        "cat-2.mp3",
        "cat-3.mp3"
      ];
      const randomCatSound = catSounds[Math.floor(Math.random() * catSounds.length)];
      const audio = new Audio(randomCatSound);
      audio.play();

      const img = document.createElement("img");
      img.src = "lucky_cat.svg";
      img.alt = "Confetti Kucing";
      img.style.position = "fixed";
      img.style.width = "80px";
      img.style.left = Math.random() * 90 + "vw";
      img.style.top = "-100px";
      img.style.zIndex = 10;
      img.style.animation = "dropCat 3s ease-in-out forwards";

      document.body.appendChild(img);
      setTimeout(() => img.remove(), 3000);
    }

    const style = document.createElement("style");
    style.textContent = `
      @keyframes dropCat {
        0% { transform: translateY(0); opacity: 0.9; }
        100% { transform: translateY(100vh); opacity: 0; }
      }
    `;
    document.head.appendChild(style);

    window.addEventListener("DOMContentLoaded", () => {
      preloadAssets();
    }); 
  </script>
</body>

</html>